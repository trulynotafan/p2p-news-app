# Auditcore

Append-only audit log using Autobase for multi-writer support.

Records operations in `{ type, data }` format.

## Usage

```javascript
const { create_auditcore } = require('auditcore')
const Corestore = require('corestore')

const store = new Corestore('./storage')

const auditcore = create_auditcore({
  store,
  bootstrap: null
})

await auditcore.ready()

await auditcore.append({
  type: 'vault_api',
  data: {
    method: 'register_app',
    params: { app_id: 'news' },
    device_id: 'abc123',
    version_before: 5,
    version_after: 6
  }
})

const entries = await auditcore.read(0, 10)
const api_calls = await auditcore.get_by_type('vault_api')
```

## API

### create_auditcore(options)

Options:
- `store` - Corestore instance
- `bootstrap` - Bootstrap key (null for new, or key to join existing)

### Properties

- `auditcore.base` - The underlying Autobase instance
- `auditcore.key` - Public key buffer
- `auditcore.writable` - Boolean, true if we can write
- `auditcore.length` - Total number of entries

### Methods

#### await auditcore.ready()
Wait for auditcore to be ready.

#### await auditcore.close()
Close the auditcore.

#### await auditcore.append({ type, data })
Append an audit entry. Type is required, data is optional.

#### await auditcore.get(seq)
Get an entry by sequence number.

#### await auditcore.read(start, end)
Read entries from start to end (exclusive).

#### await auditcore.get_by_type(type)
Get all entries matching a type.

#### await auditcore.get_by_device(device_id)
Get all entries from a specific device.

#### auditcore.create_read_stream(opts)
Stream entries. Options: `start`, `end`.

#### await auditcore.add_writer(key, is_indexer)
Add a writer for multi-device support.

#### await auditcore.update()
Force sync with peers.

### Events

- `update` - Emitted when entries update
- `entry` - Emitted when an entry is applied

For more info about autobase check out:
https://github.com/holepunchto/autobase
