# autodrive

A distributed file storage layer built on top of [autobase](https://github.com/hypercore-protocol/autobase) and [hyperdrive](https://github.com/hypercore-protocol/hyperdrive).


## API

### `create_autodrive(store, bootstrapKey, [opts])`
Creates a new autodrive instance.

- `store`: A corestore instance.
- `bootstrapKey`: (optional) The key to join an existing drive as a peer.

**Returns:** An autodrive instance with the following API:

- `.put(path, buffer)` — Add or update a file.
- `.get(path)` — Retrieve a file's contents.
- `.del(path)` — Delete a file.
- `.exists(path)` — Check if a file exists.
- `.list(path)` — List files in a directory.
- `.on(event, fn)` — Listen for events (`content-added`, `writer-added`, `writer-removed`, `reader-added`, `reader-removed`).
- `.replicate(isInitiator)` — Create a replication stream.
- `.ready()` — Await drive readiness.

### `create_wildcard_invite(bootstrapMnemonic, driveBootstrapKey, bootstrapDeviceKey)`
Creates a wildcard invite for connecting new peers.

### `verify_challenge(challenge, devicePublicKey)`
Verifies a challenge for device authentication.

### `invite_encoder`
Utility for encoding/decoding invite messages.

## Example Usage

```js
const { create_autodrive } = require('autodrive')
const Corestore = require('corestore')
const RAM = require('random-access-memory')

const store = new Corestore(RAM)
const drive = create_autodrive(store)
await drive.ready()

await drive.put('/hello.txt', Buffer.from('world'))
const content = await drive.get('/hello.txt')
console.log(content.toString()) // 'world'
```

## Test

The test suite demonstrates usage and verifies all major features:

- File operations: put, get, exists, list, del
- Replication between two drives
- Event handling (content-added, writer-added, writer-removed)


## License
MIT
